{% load staticfiles %}

<table class="stack unstriped">
    <tbody>
        {% for publication in publications %}
        <tr>
            {% with p_url=publication.url %}
            <td class="title">
                <a href="{{ p_url }}">
                    <img src="{% static 'media' %}/{{ publication.title_image }}" alt="{{ publication.title }}" />
                </a>
            </td>
            <td class="title">
                <a href="{{ p_url }}">
                    {{ publication.title }}
                </a>
            </td>
            <td class="title">
                <a href="{{ p_url }}">
                    {{ publication.year_from }} to {{ publication.year_from }}
                </a>
                <span>(
                        {% with number_of_years=publication.get_number_of_years %}
                        {{ number_of_years }} Year{{ number_of_years|pluralize }}
                        {% endwith %},

                        {{ publication.issue_count }} Issue{{ publication.issue_count|pluralize }}
                    )</span>
            </td>
            {% endwith %}
        </tr>

        {% if request.user.is_staff %}
        <div class="card-divider">
            <a href="/admin/periodicals/publication/{{ publication.id }}/change/" class="card-footer-item">Edit</a>
        </div>
        {% endif %}
        {% endfor %}
    </tbody>
</table>