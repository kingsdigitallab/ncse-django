{% extends 'periodicals/base.html' %}
{% load humanize periodicals_tags %}

{% block title %}
{{ issue }}
{% endblock %}

{% block meta_title %}
{{ issue }}
{% endblock %}

{% block main %}

<div class="row" id="main">
    <div class="small-12 medium-3 columns" data-sticky-container>
        <h2>List of Items</h2>
        <div class="sticky" data-sticky data-anchor="main">
            <div class="menu vertical" data-magellan>
                <ul class="multilevel-accordion-menu vertical menu" data-accordion-menu>
                    <li>
                        <a href="#a1">Departments <span>(120)</span></a>
                    </li>
                    <li>
                        <a href="#a2">Adverts <span>(20)</i></span></a>
                    </li>
                    <li>
                        <a href="#">Images <span>(40)</i></span></a>
                    </li>
                    <li>
                        <a href="#">Text <span>(70)</i></span></a>
                    </li>
                    <li>
                        <a href="#a3">Pages <span>(80)</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="medium-9 columns">
        <div class="row">
        {% for department in issue.departments %}
            <div class="medium-2 columns">
                Page {{ department.page.number }}
            </div>
            <div class="medium-10 columns">
                <!-- Will remove span style border -->
                <img style="border:1px solid #ccc" src="{% thumbnail department.title_image.url %}" alt="{{ department }}">
            </div>
        {% endfor %}
        </div>


        <div class="row">
        {% regroup issue.items by page as page_list %}

                {% for page in page_list %}
                {% for article in page.list %}
            <div class="medium-2 columns">
                Page {{ page.grouper.number }}
            </div>
            <div class="medium-10 columns">
                <a href="{{ article.url }}">{% if article.title %}{{ article.title }}{% else %}Untitled{% endif %}</a>
            </div>
        {% endfor %}
        {% endfor %}
        </div>

        <div id="a3" data-magellan-target="a3">
            <div class="row medium-up-2 large-up-4 container" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium" id="equal-again">
            
                {% for page in issue.pages.all %}
                <div class="column column-block">
                    <a href="{{ page.url }}">
                        {% include "periodicals/includes/page_card.html" %}
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>



<!-- Old code 
<div class="row">
    <div class="small-12 columns">
        <div class="tab_container">
            {% if issue.get_components %}
            <input id="tab4" type="radio" name="tabs">
            <label for="tab4" class="float-right">
                <i class="fa fa-th"></i>Components
            </label>
            {% endif %}
            {% if issue.get_editions %}
            <input id="tab3" type="radio" name="tabs">
            <label for="tab3" class="float-right">
                <i class="fa fa-th"></i>Editions
            </label>
            {% endif %}
            <input id="tab2" type="radio" name="tabs">
            <label for="tab2" class="float-right">
                <i class="fa fa-th"></i>Pages
            </label>
            <input id="tab1" type="radio" name="tabs" checked>
            <label for="tab1" class="float-right">
                <i class="fa fa-list-ul"></i>Table of contents
            </label>
            <input id="tab5" type="radio" name="tabs" checked>
            {% if issue.departments %}
            <label for="tab5" class="float-right">
                <i class="fa fa-list-ul"></i>Departments
            </label>
            {% endif %}

            <section id="content5" class="tab-content">
                <div class="row medium-up-2 large-up-4 container" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium" id="equal-again">
                    {% include "periodicals/includes/issue_departments.html" %}
                </div>
            </section>

            <section id="content1" class="tab-content">
                {% include "periodicals/includes/issue_toc.html" with issue=issue %}
            </section>

            <section id="content2" class="tab-content">
                <div class="row medium-up-2 large-up-4 container" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium" id="equal-again">
                    {% for page in issue.pages.all %}
                    <div class="column column-block">
                        <a href="{{ page.url }}">
                            {% include "periodicals/includes/page_card.html" %}
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </section>

            {% if issue.get_editions %}
            <section id="content3" class="tab-content">
                <div class="row medium-up-2 large-up-4 container" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium" id="equal-again">
                    {% for edition in issue.get_editions %}
                    <div class="column column-block">
                        <a href="{{ edition.url }}">
                            {% include "periodicals/includes/issue_card.html" with issue=edition %}
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}

            {% if issue.get_components %}
            <section id="content4" class="tab-content">
                <div class="row medium-up-2 large-up-4 container" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium" id="equal-again">
                    {% for component in issue.get_components %}
                    <div class="column column-block">
                        <a href="{{ component.url }}">
                            {% include "periodicals/includes/issue_card.html" with issue=component %}
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </section>
            {% endif %}
        </div>
    </div>-->
</div>
{% endblock %}