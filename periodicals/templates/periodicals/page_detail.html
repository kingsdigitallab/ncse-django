{% extends 'periodicals/base.html' %}
{% load periodicals_tags %}

{% block title %}
{{ page.issue.publication}}, {{ page.issue.issue_date }}: Page {{ page.number }}
{% endblock %}

{% block meta_title %}
{{ page.issue.publication}}, {{ page.issue.issue_date }}: Page {{ page.number }}
{% endblock %}

{% block main %}

<div class="row">
    <div class="small-12 columns minus-margin-top">
        <ul class="menu float-left">
            {% if request.GET.from == 'search'%}
            <li>
                <a href="{{ search_path }}" ><i class="fa fa-arrow-left" aria-hidden="true"></i> Back to search results</a>
            </li>
            {% else %}
            <li>
                <a href="{{ page.issue.url }}" ><i class="fa fa-arrow-left" aria-hidden="true"></i> Back to {{ page.issue.publication }}, {{ page.issue.issue_date }}</a>
            </li>
            {% endif %}
        </ul>
    </div>
</div>

<div class="row">
    <div class="small-12 columns">
        <div class="tab_container subnav">
            <input id="tab1" type="radio" name="tabs" checked>
            <label for="tab1">Image</label>
            <input id="tab2" type="radio" name="tabs">
            <label for="tab2">Transcript</label>
            <input id="tab4" type="radio" name="tabs">
            <label for="tab4">Split view</label>
            <input id="tab3" type="radio" name="tabs">
            <label for="tab3">Issue Contents</label>
            <input id="tab5" type="radio" name="tabs">
            <label for="tab5">Citation</label>

            <section id="content1" class="tab-content">
                <ul class="menu float-right">
                    <li>
                        <a href="{{ page.print_url }}" target="_blank"><i class="fa fa-print" aria-hidden="true"></i> Print image</a>
                    </li>
                </ul>
                <ul class="accordion " data-accordion data-multi-expand="true" data-allow-all-closed="true">
                    <li class="accordion-item {% if article %}is-active{% endif %}" data-accordion-item>
                        <a href="#" class="accordion-title">Items</a>
                        <div class="accordion-content" data-tab-content>
                            {% include "periodicals/includes/page_toc.html" %}
                        </div>
                    </li>
                </ul>
                {% include "periodicals/includes/page_image.html" %}
            </section>

            <section id="content2" class="tab-content">
                {% include "periodicals/includes/ocr_warning.html" %}

                {% include "periodicals/includes/page_ocr.html" %}
            </section>

            <section id="content5" class="tab-content">
                “{{ page.issue }}, Page {{ page.number }}” <i>{{ PROJECT_TITLE }}</i>, #TODO: CITATION_INFO,  {% now "j N Y" %}, {{ request.META.HTTP_HOST }}{{ page.url }}.
            </section>

            <section id="content3" class="tab-content">
                <div class="tabs" data-tabs id="issue-tabs">
                    <ul class="menu float-right">
                        <li class="tabs-title is-active">
                            <a href="#list" role="option" aria-selected="true"><i class="fa fa-list-ul" aria-hidden="true"></i> List</a>
                        </li>
                        <li class="tabs-title">
                            <a href="#grid" role="option" data-tabs-target="grid"><i class="fa fa-th" aria-hidden="true"></i> Grid</a>
                        </li>
                    </ul>
                </div>

                <div class="tabs-content" data-tabs-content="issue-tabs">
                    <section class="tabs-panel is-active" id="list">
                        <div class="row">
                            <div class="small-12 columns">
                                {% include "periodicals/includes/toc.html" with issue=page.issue %}
                            </div>
                        </div>
                    </section>

                    <section class="tabs-panel" id="grid">
                        <div class="row medium-up-2 large-up-3 container equalize-me-again" data-equalizer="cards" data-equalize-by-row="true" data-equalize-on="medium">
                            {% for page in page.issue.pages.all %}
                            <div class="column column-block">
                                <a href="{{ page.url }}">
                                    {% include "periodicals/includes/page_card.html" %}
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                    </section>
                </div>
            </section>

            <section id="content4" class="tab-content">
                <div class="row large-up-2">
                    <div class="column column-block" >
                        <div class="row">
                            <div class="small-12 columns">
                                {% include "periodicals/includes/page_image.html" %}
                            </div>
                        </div>
                    </div>

                    <div class="column column-block">
                        {% include "periodicals/includes/ocr_warning.html" %}

                        {% include "periodicals/includes/page_ocr.html" %}
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<div class="row">
    <div class="small-12 columns">
        {% with publication=page.issue.publication issue=page.issue page=page %}
        {% include 'periodicals/includes/pagination.html' %}
        {% endwith %}
    </div>
</div>

{% endblock %}

{% block footer_scripts %}
{% if highlight_words %}
<script>
var highlight_words = {{ highlight_words | safe }};
</script>
{% endif %}
{% if article and article.get_real_bounding_box %}
<script>
var article_bounding_box = {{ article.get_real_bounding_box | safe }};
</script>
{% endif %}
{% endblock %}

